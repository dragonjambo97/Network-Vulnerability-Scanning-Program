import sys
import socket
import nmap
import requests
from bs4 import BeautifulSoup

def get_ip_address(domain):
    return socket.gethostbyname(domain)

def scan_ports(ip_address):
    scanner = nmap.PortScanner()
    scanner.scan(ip_address, '1-1024')
    return scanner[ip_address]

def get_device_info(ip_address):
    response = requests.get(f'http://{ip_address}')
    soup = BeautifulSoup(response.content, 'html.parser')
    return soup.title.text

if __name__ == '__main__':
    if len(sys.argv) < 2:
        print('Usage: python main.py [domain]')
        sys.exit(1)

    domain = sys.argv[1]
    ip_address = get_ip_address(domain)

    print(f'IP address: {ip_address}')
    print(f'Device info: {get_device_info(ip_address)}')

    ports = scan_ports(ip_address)
    print('Open ports:')
    for port, data in ports['tcp'].items():
        if data['state'] == 'open':
            print(f'  Port {port}: {data["name"]}')